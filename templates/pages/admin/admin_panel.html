<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Control | ReMarket+</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="../../../css/styles.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">

    <div class="container-fluid my-4">

        <div class="row">

            <div class="col-md-3 col-lg-2 px-0">

                <!-- SIDE BAR-->
                <div class="sidebar bg-light p-3 border-end h-100">

                    <div class="admin-profile text-center mb-4">
                        <img src="https://placehold.co/70x70" alt="Admin" class="rounded-circle mb-2">
                    </div>

                    <nav class="nav flex-column">

                        <a href="../admin/admin_panel.html" class="nav-link">Panel de control</a>

                        <div class="nav-item">
                            <a class="nav-link d-flex justify-content-between align-items-center"
                                data-bs-toggle="collapse" href="#productsMenu" role="button">
                                Gestionar Productos <span>▼</span>
                            </a>

                            <div class="collapse ps-3" id="productsMenu">
                                <a href="../admin/new_product_form_admin.html" class="sidebar-subitem">Añadir
                                    productos</a>
                                <a href="../admin/products_published.html" class="sidebar-subitem">Productos
                                    publicados</a>
                                <a href="products_pending.html" class="sidebar-subitem">Aprobar productos</a>
                            </div>
                        </div>

                        <a href="../pedidos/lista.html" class="nav-link">Gestionar Pedidos</a>
                        <a href="../categorias/lista.html" class="nav-link">Gestionar Usuarios</a>

                        <hr class="text-secondary my-3 opacity-25">

                        <a href="../admin/admin_profile.html" class="nav-link">Mi Perfil</a>

                        <a href="../../pages/anonymous/login.html" class="nav-link text-danger">Cerrar sesión</a>
                    </nav>
                </div>

            </div>

            <div class="col-md-9 col-lg-10 py-3 px-4">

                <div class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
                    <h2 class="h3 fw-bold text-dark">Panel de Control</h2>
                </div>

                <div class="row g-4 mb-4">
                    <div class="col-md-3">
                        <div class="card shadow-sm border-0 text-center p-3">
                            <h6 class="fw-bold text-muted small text-uppercase">Ventas Mensuales</h6>
                            <p class="display-6 fw-bold text-primary mb-0">€12.450</p>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="card shadow-sm border-0 text-center p-3">
                            <h6 class="fw-bold text-muted small text-uppercase">Usuarios</h6>
                            <p class="display-6 fw-bold text-success mb-0">1.248</p>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="card shadow-sm border-0 text-center p-3">
                            <h6 class="fw-bold text-muted small text-uppercase">Pedidos Activos</h6>
                            <p class="display-6 fw-bold text-warning mb-0">32</p>
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div class="card shadow-sm border-0 text-center p-3">
                            <h6 class="fw-bold text-muted small text-uppercase">Pdtes. Revisión</h6>
                            <p class="display-6 fw-bold text-danger mb-0">7</p>
                        </div>
                    </div>
                </div>

                <div class="row g-4">

                    <div class="col-md-6 col-lg-6">
                        <div class="card shadow-sm border-0 p-4 h-100">
                            <h6 class="fw-bold mb-3 text-dark">Evolución de Ventas</h6>
                            <div class="chart-box">
                                <canvas id="ventasChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-6">
                        <div class="card shadow-sm border-0 p-4 h-100">
                            <h6 class="fw-bold mb-3 text-dark">Top Productos</h6>
                            <div class="chart-box">
                                <canvas id="productosChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-6">
                        <div class="card shadow-sm border-0 p-4 h-100">
                            <h6 class="fw-bold mb-3 text-dark">Crecimiento Usuarios</h6>
                            <div class="chart-box">
                                <canvas id="usuariosChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-6">
                        <div class="card shadow-sm border-0 p-4 h-100">
                            <h6 class="fw-bold mb-3 text-dark">Tipos de Pedidos</h6>
                            <div class="chart-box">
                                <canvas id="pedidosChart"></canvas>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: { legend: { labels: { font: { size: 12 } } } },
            scales: {
                x: { grid: { display: false } }, // Ocultar rejilla X para diseño más limpio
                y: { beginAtZero: true }
            }
        };

        // 1. Gráfico de Ventas
        new Chart(document.getElementById('ventasChart'), {
            type: 'bar',
            data: {
                labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                datasets: [{
                    label: 'Ventas (€)',
                    data: [1200, 1500, 1800, 2200, 2600, 3150],
                    backgroundColor: '#0d6efd',
                    borderRadius: 4
                }]
            },
            options: chartOptions
        });

        // 2. Gráfico de Productos (Donut queda más moderno que Pie)
        new Chart(document.getElementById('productosChart'), {
            type: 'doughnut', // Cambiado a doughnut por estética
            data: {
                labels: ['iPhone 13', 'PS5', 'Samsung S22', 'iPad Air'],
                datasets: [{
                    data: [35, 25, 20, 15],
                    backgroundColor: ['#0d6efd', '#198754', '#ffc107', '#dc3545'],
                    borderWidth: 0
                }]
            },
            options: {
                ...chartOptions,
                scales: { x: { display: false }, y: { display: false } } // Sin ejes en donut
            }
        });

        // 3. Gráfico de Usuarios
        new Chart(document.getElementById('usuariosChart'), {
            type: 'line',
            data: {
                labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                datasets: [{
                    label: 'Usuarios',
                    data: [120, 180, 260, 340, 420, 500],
                    borderColor: '#198754',
                    backgroundColor: 'rgba(25, 135, 84, 0.1)',
                    tension: 0.3,
                    fill: true
                }]
            },
            options: chartOptions
        });

        // 4. Gráfico de Pedidos
        new Chart(document.getElementById('pedidosChart'), {
            type: 'bar',
            data: {
                labels: ['Nuevos', 'Reacond.', '2ª Mano'],
                datasets: [{
                    label: 'Pedidos',
                    data: [45, 30, 60],
                    backgroundColor: ['#0d6efd', '#6f42c1', '#ffc107'],
                    borderRadius: 4
                }]
            },
            options: chartOptions
        });
    </script>
</body>

</html>